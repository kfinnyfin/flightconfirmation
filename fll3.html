<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Client Portal | Signature Elite Aviation</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Leaflet Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* -----------------------------------------------------------
           1. CORE VARIABLES & RESET
           ----------------------------------------------------------- */
        :root {
            /* Palette - Lux Dark Mode (Default) */
            --bg-deep: #050505;
            --bg-panel: #121212;
            --primary-gold: #D4AF37;
            --primary-gold-dim: #8a7340;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --accent-blue: #45a29e;
            
            /* UI Elements */
            --glass-bg: rgba(20, 20, 20, 0.85);
            --glass-border: rgba(255, 255, 255, 0.08);
            --radius-lg: 20px;
            --radius-sm: 8px;
            
            --nav-width: 90px;
            --header-height: 80px;
        }

        /* LIGHT MODE OVERRIDES */
        [data-theme="light"] {
            --bg-deep: #f0f2f5;
            --bg-panel: #ffffff;
            --primary-gold: #b38f2d; /* Darker gold for contrast */
            --primary-gold-dim: #D4AF37;
            --text-main: #1a1a1a;
            --text-muted: #666666;
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Manrope', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            overflow: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        h1, h2, h3 { font-family: 'Playfair Display', serif; font-weight: 500; margin: 0; }
        .mono { font-family: monospace; letter-spacing: -0.5px; }

        /* -----------------------------------------------------------
           2. LAYOUT STRUCTURE
           ----------------------------------------------------------- */
        #app-container {
            display: grid;
            grid-template-columns: var(--nav-width) 1fr;
            grid-template-rows: var(--header-height) 1fr;
            height: 100vh;
            background: var(--bg-deep); /* Use variable for theme switching */
        }
        
        [data-theme="light"] #app-container {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* SIDEBAR */
        .sidebar {
            grid-row: 1 / -1;
            background: var(--glass-bg);
            border-right: 1px solid var(--glass-border);
            display: flex; flex-direction: column; align-items: center;
            padding-top: 30px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .brand-logo { 
            font-size: 1.8rem; color: var(--primary-gold); margin-bottom: 50px; 
            filter: drop-shadow(0 0 10px rgba(197,164,92,0.3));
        }

        .nav-item {
            width: 50px; height: 50px;
            border-radius: 12px;
            display: flex; justify-content: center; align-items: center;
            color: var(--text-muted);
            font-size: 1.2rem;
            margin-bottom: 25px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
        }
        .nav-item:hover { color: var(--text-main); background: rgba(128,128,128,0.1); }
        .nav-item.active { background: var(--primary-gold); color: #000; box-shadow: 0 5px 15px rgba(197,164,92,0.4); }

        /* HEADER */
        .top-header {
            grid-column: 2;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px;
            border-bottom: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
        }

        .countdown-timer {
            font-family: monospace;
            background: rgba(212, 175, 55, 0.1);
            color: var(--primary-gold);
            padding: 8px 16px;
            border-radius: 4px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            font-size: 0.9rem;
        }

        /* MAIN CONTENT */
        #view-container {
            grid-column: 2;
            padding: 40px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .view-section { display: none; animation: fadeIn 0.5s ease; max-width: 1400px; margin: 0 auto; }
        .view-section.active-view { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* -----------------------------------------------------------
           3. DASHBOARD COMPONENTS
           ----------------------------------------------------------- */
        .dashboard-grid {
            display: grid; grid-template-columns: 2fr 1fr; gap: 30px;
        }

        .card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 25px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            transition: background 0.3s, border-color 0.3s;
        }

        /* MAP STYLES */
        #map-container {
            width: 100%; height: 450px;
            border-radius: var(--radius-lg);
            z-index: 1;
        }
        /* Custom Leaflet Theming */
        .leaflet-container { background: #1a1a1a; font-family: 'Manrope'; }
        [data-theme="light"] .leaflet-container { background: #e0e0e0; }
        
        .leaflet-bar a { background-color: #333; color: #fff; border-bottom: 1px solid #444; }
        .leaflet-bar a:hover { background-color: #444; }
        
        /* 3D Plane Effect via CSS */
        .plane-marker {
            transition: transform 0.1s linear;
            will-change: transform;
        }
        .plane-marker i {
            display: block;
            filter: drop-shadow(0 10px 5px rgba(0,0,0,0.5));
            /* Banking animation applied in JS or simple hover */
            transition: transform 0.5s ease;
        }
        
        /* AIRCRAFT CARD */
        .aircraft-hero {
            width: 100%; height: 200px;
            background: url('https://images.unsplash.com/photo-1540962351504-03099e0a754b?auto=format&fit=crop&w=800&q=80') center/cover;
            border-radius: var(--radius-sm);
            margin-bottom: 20px;
            position: relative;
        }
        .aircraft-hero::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            border-radius: var(--radius-sm);
        }
        .tail-number {
            position: absolute; bottom: 15px; left: 15px;
            font-family: monospace; font-size: 1.5rem; color: #fff; z-index: 2;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* WEATHER WIDGET */
        .weather-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--glass-border); }
        .weather-row:last-child { border-bottom: none; }
        .weather-temp { font-size: 1.5rem; font-weight: 700; color: var(--text-main); }

        /* CREW WIDGET */
        .crew-row { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .crew-avatar { width: 40px; height: 40px; border-radius: 50%; background: #333; display: flex; align-items: center; justify-content: center; border: 1px solid var(--primary-gold); color: #fff;}
        
        /* WIFI WIDGET */
        .wifi-details { background: rgba(128,128,128,0.1); padding: 15px; border-radius: 8px; border: 1px solid var(--glass-border); margin-top: 10px; }
        .wifi-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        .wifi-val { font-family: monospace; font-size: 1rem; color: var(--primary-gold); letter-spacing: 1px; }

        /* -----------------------------------------------------------
           4. DINING (MULTI-SELECT)
           ----------------------------------------------------------- */
        .provisioning-group { margin-bottom: 30px; }
        .provisioning-label { font-size: 0.9rem; color: var(--primary-gold); text-transform: uppercase; margin-bottom: 10px; letter-spacing: 1px; }
        
        .multi-select-container {
            display: flex; flex-wrap: wrap; gap: 10px;
        }
        
        .select-option {
            background: rgba(128,128,128,0.1);
            border: 1px solid var(--glass-border);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-main);
            cursor: pointer;
            transition: 0.2s;
            user-select: none;
        }
        
        .select-option:hover {
            border-color: var(--primary-gold-dim);
        }
        
        .select-option.selected {
            background: var(--primary-gold);
            color: #000;
            border-color: var(--primary-gold);
            font-weight: 600;
            box-shadow: 0 0 10px rgba(212,175,55,0.4);
        }

        .custom-input {
            width: 100%; padding: 15px; background: rgba(128,128,128,0.1); border: 1px solid var(--glass-border); color: var(--text-main); border-radius: 8px; font-family: 'Manrope';
        }

        /* -----------------------------------------------------------
           5. CABIN & ENVIRONMENT (HORIZONTAL BLUEPRINT)
           ----------------------------------------------------------- */
        /* Horizontal Fuselage */
        .blueprint-container {
            overflow-x: auto;
            padding: 20px 0;
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .blueprint-container::-webkit-scrollbar { display: none; }

        .fuselage-horizontal {
            width: 900px;
            height: 280px;
            border: 2px solid var(--primary-gold);
            border-radius: 120px 20px 20px 120px; /* Nose left */
            position: relative;
            background: 
                linear-gradient(90deg, rgba(212,175,55,0.05) 1px, transparent 1px),
                linear-gradient(rgba(212,175,55,0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding-left: 100px;
            transition: box-shadow 0.5s ease, border-color 0.5s ease;
        }
        
        .cockpit-h {
            position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
            width: 80px; height: 180px;
            border-right: 2px solid var(--primary-gold-dim);
            border-radius: 80px 0 0 80px;
            display: flex; align-items: center; justify-content: center;
            writing-mode: vertical-rl;
            color: var(--primary-gold-dim); font-size: 0.7rem; letter-spacing: 2px;
        }

        /* Seat Styling */
        .h-seat {
            width: 50px; height: 50px;
            background: rgba(20,20,20,0.8);
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            position: absolute;
            cursor: pointer;
            transition: 0.2s;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.6rem; color: #fff;
        }
        [data-theme="light"] .h-seat { background: #fff; color: #333; }
        
        .h-seat:hover { border-color: var(--primary-gold); box-shadow: 0 0 10px rgba(212,175,55,0.3); }
        .h-seat.assigned { background: var(--primary-gold); border-color: var(--primary-gold); color: #000; font-weight: 700; }

        /* Zones */
        .zone-h { position: relative; height: 100%; border-right: 1px dashed var(--glass-border); }
        .zone-label-h {
            position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%);
            font-size: 0.6rem; color: var(--primary-gold-dim); letter-spacing: 1px;
        }

        /* Forward Club (Zone 1) */
        .zone-1 { width: 200px; }
        .zone-1 .s1 { top: 40px; left: 30px; }
        .zone-1 .s2 { top: 40px; left: 110px; }
        .zone-1 .s3 { bottom: 40px; left: 30px; }
        .zone-1 .s4 { bottom: 40px; left: 110px; }

        /* Conf Group (Zone 2) */
        .zone-2 { width: 240px; }
        .zone-2 .s1 { top: 40px; left: 30px; }
        .zone-2 .s2 { top: 40px; left: 90px; }
        .zone-2 .table-h { 
            position: absolute; top: 40px; left: 150px; width: 60px; height: 50px; 
            border: 1px solid var(--primary-gold-dim); border-radius: 4px; 
            display: flex; align-items: center; justify-content: center; font-size: 0.6rem; color: var(--primary-gold-dim);
        }
        .zone-2 .credenza-h {
            position: absolute; bottom: 40px; left: 30px; width: 180px; height: 40px;
            background: rgba(128,128,128,0.1); border: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: center; font-size: 0.6rem; color: var(--text-muted);
        }

        /* Aft Stateroom (Zone 3) */
        .zone-3 { width: 240px; border-right: none; }
        .zone-3 .divan-h {
            position: absolute; bottom: 40px; left: 30px; width: 160px; height: 50px;
            border: 1px solid var(--text-muted); border-radius: 4px;
            display: flex; align-items: center; justify-content: center; font-size: 0.6rem; color: var(--text-muted);
        }
        .zone-3 .s1 { top: 40px; left: 40px; }
        .zone-3 .s2 { top: 40px; left: 120px; }

        /* Environment Controls */
        .env-controls {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 30px;
        }
        .control-box {
            background: rgba(128,128,128,0.05); padding: 20px; border-radius: 12px; border: 1px solid var(--glass-border); text-align: center;
        }
        .control-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 15px; }
        
        input[type="range"] {
            -webkit-appearance: none; width: 100%; height: 4px; background: #555; border-radius: 2px; outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 16px; height: 16px; background: var(--primary-gold); border-radius: 50%; cursor: pointer;
        }

        .mood-grid { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .mood-btn {
            width: 25px; height: 25px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; transition: 0.2s;
        }
        .mood-btn:hover { transform: scale(1.1); }
        .mood-btn.selected { border-color: var(--text-main); transform: scale(1.2); box-shadow: 0 0 10px currentColor; }

        /* Modal */
        #passenger-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: var(--bg-panel); padding: 30px; border-radius: 12px; width: 300px; border: 1px solid var(--primary-gold);
            text-align: center; color: var(--text-main);
        }
        .modal-input {
            width: 100%; padding: 10px; margin: 15px 0; background: rgba(255,255,255,0.1); border: 1px solid var(--glass-border); color: var(--text-main); border-radius: 4px;
        }
        .modal-btn {
            background: var(--primary-gold); border: none; padding: 10px 20px; color: #000; font-weight: 700; border-radius: 4px; cursor: pointer;
        }

        /* -----------------------------------------------------------
           6. MOBILE RESPONSIVE
           ----------------------------------------------------------- */
        @media (max-width: 900px) {
            #app-container { grid-template-columns: 1fr; grid-template-rows: 70px 1fr 70px; }
            .sidebar { grid-row: 3; flex-direction: row; justify-content: space-around; width: 100%; border-right: none; border-top: 1px solid var(--glass-border); padding-top: 0; }
            .brand-logo { display: none; }
            .nav-item { margin-bottom: 0; }
            .dashboard-grid { grid-template-columns: 1fr; }
            #map-container { height: 300px; }
            .env-controls { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Passenger Assignment Modal -->
    <div id="passenger-modal">
        <div class="modal-content">
            <h3 style="color: var(--primary-gold); margin-bottom: 10px;">Assign Seat</h3>
            <p style="font-size: 0.8rem; color: var(--text-muted);">Enter Passenger Name</p>
            <input type="text" id="pax-name" class="modal-input" placeholder="e.g. J. Smith">
            <button class="modal-btn" onclick="savePassenger()">Confirm Assignment</button>
            <div style="margin-top: 10px; font-size: 0.7rem; color: var(--text-muted); cursor: pointer;" onclick="closeModal()">Cancel</div>
        </div>
    </div>

    <div id="app-container" data-theme="dark">
        
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand-logo"><i class="fas fa-crown"></i></div>
            
            <div class="nav-item active" onclick="switchView('dashboard', this)">
                <i class="fas fa-chart-pie"></i>
            </div>
            <div class="nav-item" onclick="switchView('itinerary', this)">
                <i class="fas fa-list-ul"></i>
            </div>
            <div class="nav-item" onclick="switchView('dining', this)">
                <i class="fas fa-utensils"></i>
            </div>
            <div class="nav-item" onclick="switchView('seats', this)">
                <i class="fas fa-couch"></i>
            </div>
            
            <!-- Dark Mode Toggle -->
            <div class="nav-item" onclick="toggleTheme()" style="margin-top: auto;">
                <i class="fas fa-adjust"></i>
            </div>
        </nav>

        <!-- Header -->
        <header class="top-header">
            <div>
                <h2 style="font-size: 1.4rem;">Flight Dashboard</h2>
                <div style="font-size: 0.8rem; color: var(--text-muted);">Client: Mr. Finberg</div>
            </div>
            <div id="countdown" class="countdown-timer">
                T-MINUS 23 DAYS...
            </div>
        </header>

        <!-- Main View -->
        <main id="view-container">

            <!-- DASHBOARD VIEW -->
            <div id="dashboard" class="view-section active-view">
                <div class="dashboard-grid">
                    
                    <!-- Map Card -->
                    <div class="card" style="grid-column: 1 / -1; padding: 0; border: none;">
                        <div id="map-container"></div>
                        <div style="position: absolute; bottom: 20px; left: 20px; z-index: 500; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.1);">
                            <div style="color: var(--primary-gold); font-size: 0.8rem; font-weight: 700; letter-spacing: 1px;">ROUTE PREVIEW</div>
                            <div style="font-size: 1.2rem; font-weight: 300; margin-top: 5px; color:#fff;">Departs Dec 19 • 09:45 AM</div>
                        </div>
                    </div>

                    <!-- Aircraft Info -->
                    <div class="card">
                        <h3 style="margin-bottom: 20px; font-size: 1.1rem;">Aircraft Specifications</h3>
                        <div class="aircraft-hero">
                            <div class="tail-number">N650SE</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">Model</div>
                                <div style="font-size: 1rem;">Gulfstream G650ER</div>
                            </div>
                            <div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">Range</div>
                                <div style="font-size: 1rem;">7,500 nm</div>
                            </div>
                        </div>
                    </div>

                    <!-- Crew Info -->
                    <div class="card">
                        <h3 style="margin-bottom: 20px; font-size: 1.1rem;">Crew Manifest</h3>
                        <div class="crew-row">
                            <div class="crew-avatar"><i class="fas fa-user-tie"></i></div>
                            <div>
                                <div style="font-size: 0.9rem; font-weight: 600;">Capt. James Mitchell</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Pilot in Command</div>
                            </div>
                        </div>
                        <div class="crew-row">
                            <div class="crew-avatar"><i class="fas fa-user"></i></div>
                            <div>
                                <div style="font-size: 0.9rem; font-weight: 600;">Sarah Jenkins</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Cabin Experience Lead</div>
                            </div>
                        </div>
                    </div>

                    <!-- Weather -->
                    <div class="card">
                        <h3 style="margin-bottom: 20px; font-size: 1.1rem;">Meteorology</h3>
                        <div class="weather-row">
                            <div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">DEPARTURE</div>
                                <div>San Diego (SAN)</div>
                            </div>
                            <div class="weather-temp">64°F</div>
                        </div>
                        <div class="weather-row">
                            <div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">ARRIVAL</div>
                                <div>Fort Lauderdale (FLL)</div>
                            </div>
                            <div class="weather-temp">78°F</div>
                        </div>
                    </div>

                    <!-- Connectivity -->
                    <div class="card">
                        <h3 style="margin-bottom: 20px; font-size: 1.1rem;"><i class="fas fa-wifi"></i> Connectivity</h3>
                        <div class="wifi-details">
                            <div class="wifi-label">Network</div>
                            <div class="wifi-val" style="margin-bottom: 10px;">G650_N650SE_SECURE</div>
                            <div class="wifi-label">Password</div>
                            <div class="wifi-val">FlyElite2025!</div>
                        </div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 10px; text-align: center;">Ka-Band Satellite Internet Available</div>
                    </div>

                </div>
            </div>

            <!-- ITINERARY VIEW -->
            <div id="itinerary" class="view-section">
                <div class="section-header">
                    <h2>Flight Manifesto</h2>
                    <button style="padding: 10px 20px; background: transparent; border: 1px solid var(--text-muted); color: var(--text-main); border-radius: 6px; cursor: pointer;">Download PDF</button>
                </div>
                <!-- Simple Timeline Card -->
                <div class="card">
                    <div style="border-left: 2px solid var(--glass-border); padding-left: 30px; margin-left: 10px;">
                        <div style="margin-bottom: 40px; position: relative;">
                            <div style="position: absolute; left: -36px; top: 5px; width: 10px; height: 10px; background: var(--primary-gold); border-radius: 50%;"></div>
                            <div style="color: var(--primary-gold); font-weight: 700; margin-bottom: 5px;">09:00 AM</div>
                            <div style="font-size: 1.2rem;">Chauffeur Pickup</div>
                            <div style="color: var(--text-muted);">Cadillac Escalade | Driver: Michael</div>
                        </div>
                        <div style="margin-bottom: 40px; position: relative;">
                            <div style="position: absolute; left: -36px; top: 5px; width: 10px; height: 10px; background: var(--glass-border); border-radius: 50%;"></div>
                            <div style="color: var(--primary-gold); font-weight: 700; margin-bottom: 5px;">09:45 AM</div>
                            <div style="font-size: 1.2rem;">Wheels Up</div>
                            <div style="color: var(--text-muted);">Direct to FLL | Flight Time: 4h 35m</div>
                        </div>
                        <div style="margin-bottom: 0; position: relative;">
                            <div style="position: absolute; left: -36px; top: 5px; width: 10px; height: 10px; background: var(--glass-border); border-radius: 50%;"></div>
                            <div style="color: var(--primary-gold); font-weight: 700; margin-bottom: 5px;">05:20 PM EST</div>
                            <div style="font-size: 1.2rem;">Arrival</div>
                            <div style="color: var(--text-muted);">Sheltair Aviation | Ramp Access</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DINING VIEW -->
            <div id="dining" class="view-section">
                <div class="section-header">
                    <div>
                        <h2>Provisioning</h2>
                        <p style="color: var(--text-muted); margin-top: 5px;">Select multiple items for galley stock.</p>
                    </div>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 30px; color: var(--primary-gold);">Galley Selections</h3>
                    
                    <div class="provisioning-group">
                        <div class="provisioning-label">Top Shelf Spirits</div>
                        <div class="multi-select-container">
                            <div class="select-option" onclick="toggleOption(this)">Clase Azul Reposado</div>
                            <div class="select-option" onclick="toggleOption(this)">Don Julio 1942</div>
                            <div class="select-option" onclick="toggleOption(this)">Macallan 18 Year</div>
                            <div class="select-option" onclick="toggleOption(this)">Johnny Walker Blue</div>
                            <div class="select-option" onclick="toggleOption(this)">Grey Goose VX</div>
                            <div class="select-option" onclick="toggleOption(this)">Belvedere</div>
                        </div>
                    </div>

                    <div class="provisioning-group">
                        <div class="provisioning-label">Sommelier Selection (Wine)</div>
                        <div class="multi-select-container">
                             <div class="select-option" onclick="toggleOption(this)">Dom Pérignon 2012</div>
                             <div class="select-option" onclick="toggleOption(this)">Opus One 2018</div>
                             <div class="select-option" onclick="toggleOption(this)">Cakebread Chardonnay</div>
                             <div class="select-option" onclick="toggleOption(this)">Silver Oak Cabernet</div>
                             <div class="select-option" onclick="toggleOption(this)">Whispering Angel Rose</div>
                        </div>
                    </div>

                    <div class="provisioning-group">
                        <div class="provisioning-label">Entree Preference</div>
                        <div class="multi-select-container">
                             <div class="select-option" onclick="toggleOption(this)">Wagyu Beef Sliders</div>
                             <div class="select-option" onclick="toggleOption(this)">Butter Poached Lobster</div>
                             <div class="select-option" onclick="toggleOption(this)">Miso Glazed Seabass</div>
                             <div class="select-option" onclick="toggleOption(this)">Filet Mignon</div>
                             <div class="select-option" onclick="toggleOption(this)">Omakase Sashimi</div>
                        </div>
                    </div>

                    <div class="provisioning-group">
                         <div class="provisioning-label">Special Requests / Allergies</div>
                         <input type="text" class="custom-input" placeholder="Enter specific requests...">
                    </div>
                </div>
            </div>

            <!-- CABIN & SEATS VIEW -->
            <div id="seats" class="view-section">
                <div class="section-header">
                    <h2>Cabin Control & Manifest</h2>
                    <p style="color: var(--text-muted);">Select seats to assign passengers.</p>
                </div>
                
                <!-- Horizontal Fuselage Map -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="blueprint-container">
                        <div class="fuselage-horizontal" id="fuselage-h">
                            <div class="cockpit-h">COCKPIT</div>
                            
                            <!-- Zone 1: Club -->
                            <div class="zone-h zone-1">
                                <div class="zone-label-h">FWD CLUB</div>
                                <div class="h-seat s1" onclick="openSeat(this)">1A</div>
                                <div class="h-seat s2" onclick="openSeat(this)">1B</div>
                                <div class="h-seat s3" onclick="openSeat(this)">2A</div>
                                <div class="h-seat s4" onclick="openSeat(this)">2B</div>
                            </div>

                            <!-- Zone 2: Conference -->
                            <div class="zone-h zone-2">
                                <div class="zone-label-h">MID CONF</div>
                                <div class="h-seat s1" onclick="openSeat(this)">3A</div>
                                <div class="h-seat s2" onclick="openSeat(this)">3B</div>
                                <div class="table-h">TBL</div>
                                <div class="credenza-h">CREDENZA / MONITOR</div>
                            </div>

                            <!-- Zone 3: Aft -->
                            <div class="zone-h zone-3">
                                <div class="zone-label-h">AFT SUITE</div>
                                <div class="h-seat s1" onclick="openSeat(this)">4A</div>
                                <div class="h-seat s2" onclick="openSeat(this)">4B</div>
                                <div class="divan-h">BERTHABLE DIVAN</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Environment Controls -->
                <div class="card">
                    <h3 style="color: var(--primary-gold); margin-bottom: 20px;">ROYGBIV Mood Lighting</h3>
                    <div class="env-controls">
                        <!-- Lighting -->
                        <div class="control-box" style="grid-column: span 3;">
                            <div class="control-label"><i class="fas fa-lightbulb"></i> Select Ambient Color</div>
                            <div class="mood-grid">
                                <!-- ROYGBIV + Neutral -->
                                <div class="mood-btn" style="background: #fff; box-shadow: 0 0 10px #fff;" onclick="setMood(this, 'rgba(255, 255, 255, 0.4)')" title="Daylight"></div>
                                <div class="mood-btn" style="background: #FF0000; box-shadow: 0 0 10px #FF0000;" onclick="setMood(this, 'rgba(255, 0, 0, 0.4)')" title="Red"></div>
                                <div class="mood-btn" style="background: #FF7F00; box-shadow: 0 0 10px #FF7F00;" onclick="setMood(this, 'rgba(255, 127, 0, 0.4)')" title="Orange"></div>
                                <div class="mood-btn" style="background: #FFFF00; box-shadow: 0 0 10px #FFFF00;" onclick="setMood(this, 'rgba(255, 255, 0, 0.4)')" title="Yellow"></div>
                                <div class="mood-btn" style="background: #00FF00; box-shadow: 0 0 10px #00FF00;" onclick="setMood(this, 'rgba(0, 255, 0, 0.4)')" title="Green"></div>
                                <div class="mood-btn" style="background: #0000FF; box-shadow: 0 0 10px #0000FF;" onclick="setMood(this, 'rgba(0, 0, 255, 0.4)')" title="Blue"></div>
                                <div class="mood-btn" style="background: #4B0082; box-shadow: 0 0 10px #4B0082;" onclick="setMood(this, 'rgba(75, 0, 130, 0.4)')" title="Indigo"></div>
                                <div class="mood-btn" style="background: #9400D3; box-shadow: 0 0 10px #9400D3;" onclick="setMood(this, 'rgba(148, 0, 211, 0.4)')" title="Violet"></div>
                            </div>
                        </div>

                        <!-- Temperature -->
                        <div class="control-box" style="grid-column: span 1;">
                            <div class="control-label"><i class="fas fa-thermometer-half"></i> Temp</div>
                            <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: 10px;"><span id="temp-display">70</span>°F</div>
                            <input type="range" min="65" max="78" value="70" oninput="document.getElementById('temp-display').innerText = this.value">
                        </div>
                        
                         <!-- Audio -->
                         <div class="control-box" style="grid-column: span 2;">
                             <div class="control-label"><i class="fas fa-music"></i> Boarding Audio</div>
                             <div class="multi-select-container" style="justify-content: center;">
                                <div class="select-option" onclick="toggleOption(this)">Jazz</div>
                                <div class="select-option" onclick="toggleOption(this)">Lo-Fi</div>
                                <div class="select-option" onclick="toggleOption(this)">Classical</div>
                             </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // 1. Navigation Logic
        function switchView(viewId, navElement) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(navElement) navElement.classList.add('active');
            
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));
            const target = document.getElementById(viewId);
            target.classList.add('active-view');

            if(viewId === 'dashboard' && map) {
                setTimeout(() => { map.invalidateSize(); }, 100);
            }
        }

        // 2. Leaflet Map Logic (3D Tilt Effect)
        let map;
        let planeMarker;
        
        function initMap() {
            const san = [32.7338, -117.1933];
            const fll = [26.0726, -80.1527];
            const center = [32.0, -98.0];

            // Light/Dark Map Tiles based on current theme check would go here, 
            // but for simplicity we keep Dark Mode tiles as they look premium.
            map = L.map('map-container', {
                center: center,
                zoom: 4,
                zoomControl: false,
                attributionControl: false,
                dragging: false,
                scrollWheelZoom: false
            });

            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(map);

            const latlngs = [san, fll];
            L.polyline(latlngs, {
                color: '#D4AF37',
                weight: 2,
                opacity: 0.8,
                dashArray: '5, 10'
            }).addTo(map);

            const dotIcon = L.divIcon({
                className: 'custom-dot',
                html: '<div style="width:8px; height:8px; background:#fff; border-radius:50%; box-shadow:0 0 10px #fff;"></div>',
                iconSize: [8, 8]
            });
            L.marker(san, {icon: dotIcon}).addTo(map);
            L.marker(fll, {icon: dotIcon}).addTo(map);

            // 3D-ish Plane Icon
            const planeIcon = L.divIcon({
                className: 'plane-marker',
                html: '<i class="fas fa-plane" style="color: #D4AF37; font-size: 28px; display:block; filter: drop-shadow(0 0 10px rgba(212,175,55,0.6));"></i>',
                iconSize: [28, 28],
                iconAnchor: [14, 14]
            });
            
            planeMarker = L.marker(san, {icon: planeIcon}).addTo(map);
            
            let percent = 0;
            // Simulated banking: plane tilts slightly based on position in sine wave
            setInterval(() => {
                percent += 0.002;
                if(percent > 1) percent = 0;
                
                const lat = san[0] + (fll[0] - san[0]) * percent;
                const lng = san[1] + (fll[1] - san[1]) * percent;
                planeMarker.setLatLng([lat, lng]);

                // Calculate rotation and bank
                const angle = 90; // Approx heading East
                // Simple banking effect:
                const bank = Math.sin(percent * 20) * 15; // +/- 15 degree roll
                
                const icon = document.querySelector('.plane-marker i');
                if(icon) {
                    icon.style.transform = `rotate(${angle}deg) rotateX(${bank}deg)`;
                }
            }, 30);
        }

        // 3. Passenger Assignment Logic
        let currentSeat = null;

        function openSeat(seatElement) {
            currentSeat = seatElement;
            document.getElementById('passenger-modal').style.display = 'flex';
            document.getElementById('pax-name').value = ''; 
            document.getElementById('pax-name').focus();
        }

        function closeModal() {
            document.getElementById('passenger-modal').style.display = 'none';
            currentSeat = null;
        }

        function savePassenger() {
            const name = document.getElementById('pax-name').value;
            if (name && currentSeat) {
                currentSeat.classList.add('assigned');
                currentSeat.innerText = name.substring(0, 5) + (name.length > 5 ? '.' : '');
                currentSeat.style.fontSize = "0.5rem";
            }
            closeModal();
        }

        // 4. Mood Logic
        function setMood(element, color) {
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
            element.classList.add('selected');
            
            const cabin = document.getElementById('fuselage-h');
            cabin.style.boxShadow = `0 0 40px ${color}, inset 0 0 60px ${color}`;
            cabin.style.borderColor = "rgba(255,255,255,0.5)";
        }

        // 5. Countdown Logic
        function updateCountdown() {
            const now = new Date();
            let targetYear = now.getFullYear();
            let targetDate = new Date(`December 19, ${targetYear} 09:45:00`);
            
            if (now > targetDate) {
                targetDate = new Date(`December 19, ${targetYear + 1} 09:45:00`);
            }
            
            const diff = targetDate - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').innerText = 
                `T-MINUS ${days} DAYS ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // 6. Multi-Select Logic
        function toggleOption(element) {
            element.classList.toggle('selected');
        }

        // 7. Light/Dark Toggle
        function toggleTheme() {
            const app = document.getElementById('app-container');
            if(app.getAttribute('data-theme') === 'dark') {
                app.setAttribute('data-theme', 'light');
            } else {
                app.setAttribute('data-theme', 'dark');
            }
        }

        // Initialize
        window.onload = function() {
            initMap();
            updateCountdown();
        };

    </script>
</body>
</html>